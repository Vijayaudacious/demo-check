import{h as c,q as _,i as l,k as f,m as T,b as g,U as p,d as t,n as A,g as e,j as u,D}from"./index-525ca9a9.js";import{P as R}from"./index-938f1939.js";import{r as U}from"./antd-2568dec6.js";const v=async({search:a,currentPage:n,limit:r,field:L,sortBy:d,fromDate:y,toDate:E})=>(await c(`/list?${_.stringify({search:a,currentPage:n,limit:r,field:L,sortBy:d,fromDate:y,toDate:E})}`,void 0,"GET",void 0,"leaves")).data,j={SINGLE_EMPLOYEE_LEAVE_DETAILS:"single-employee-leave-details",LEAVES_LIST:"leaves-list",LEAVES_BY_USER:"leaves-by-user"},P=a=>l([j.LEAVES_LIST,a],()=>v(a)),I={USER_DETAILS:"user-details",USERS:"all-users"},O=a=>l([I.USERS,a],()=>f(a)),Y=a=>T("/projects","GET",a),x={PROJECTS_LIST:"projects-list",PROJECTS_DETAILS:"project-details"},C=a=>l([x.PROJECTS_LIST,a],()=>Y(a)),{DEFAULT_DATE_FORMAT:k,YEAR_MONTH_DAY:o}=D,w=()=>{g(),U.useContext(p);const{data:a,isLoading:n}=O({action:"active"}),{data:r,isLoading:L}=C({}),{data:d,isLoading:y}=P({fromDate:t().startOf("day").format(o),toDate:t().endOf("day").format(o)}),{data:E,isLoading:h}=A({startDate:t().startOf("day").format(o),limit:1}),S=e(E,"data",[]).find(m=>m.leaveType!=="weekoff"),s=e(S,"occurenece");let i;return(s==null?void 0:s.cycle)==="weekly"?i=t().day(0).add(s.day,"day").format(o):(s==null?void 0:s.cycle)==="daily"?i=t().format(o):(s==null||s.cycle,i=t().date((s==null?void 0:s.date)||1)),t(i).isSame(t(),"day"),e(a,"totalRecords",0),e(r,"totalItems",0),e(d,"data",[]),u.jsx(R,{noBreadcrum:!0})};export{w as default};
