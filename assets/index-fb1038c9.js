import{A as y,u as b,b as w,j as e,L as p,a as h,o as x,p as u}from"./index-525ca9a9.js";import{r as c,m as f,V as _,o as j,C as P,F as o,B as v,G as g}from"./antd-2568dec6.js";import{P as S}from"./index-938f1939.js";var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"};const N=L;var B=function(r,t){return c.createElement(y,f({},r,{ref:t,icon:N}))};const C=c.forwardRef(B);var z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const O=z;var M=function(r,t){return c.createElement(y,f({},r,{ref:t,icon:O}))};const A=c.forwardRef(M),D="_passwordContainer_1rbpd_5",E="_detailBox_1rbpd_10",I="_empDsc_1rbpd_16",q="_fields_1rbpd_21",$="_buttonGroup_1rbpd_24",G="_submitButton_1rbpd_27",R="_employeeDetailsection_1rbpd_34",n={passwordContainer:D,detailBox:E,empDsc:I,fields:q,buttonGroup:$,submitButton:G,employeeDetailsection:R},k=({children:s,breadcurmbs:r})=>{const{pathname:t}=b(),[l,d]=c.useState("employee"),{formatMessage:a}=w();c.useEffect(()=>{t.includes("/employee")?d("employee"):t.includes("/security")&&d("security")},[l]);const i=[{label:e.jsxs(p,{to:"/settings/employee",id:"general",children:[e.jsx(A,{}),a({id:"settings.tabs.organization.general"})]}),key:"employee"},{label:e.jsxs(p,{to:"/settings/security",id:"security",children:[e.jsx(C,{}),a({id:"settings.tabs.Profile.security"})]}),key:"security"}];return e.jsxs(S,{breadcurmbs:r,children:[e.jsx(_,{items:i,activeKey:l,type:"card"}),s]})},W=()=>{const{formatMessage:s}=w(),r=h(),{mutateAsync:t,isLoading:l}=x(),d=async a=>{try{await t(a),g.success(s({id:"settings.security.message.updated"})),r("/login")}catch(i){g.error(i==null?void 0:i.response.data.message)}};return e.jsx(k,{breadcurmbs:[{breadcrumbName:s({id:"breadcrumbs.settings"}),path:"/settings/profile"},{breadcrumbName:s({id:"breadcrumbs.security"}),path:"/settings/security"}],children:e.jsx(j,{className:n.passwordContainer,children:e.jsx(P,{xxl:18,xl:20,xs:24,children:e.jsxs(o,{layout:"vertical",name:"changePassword",onFinish:d,className:n.formLogines,children:[e.jsx(o.Item,{name:"oldPassword",label:s({id:"settings.security.form.currentPassword.label"}),rules:[{required:!0,message:s({id:"settings.security.form.currentPassword.required"})}],children:e.jsx(u,{type:"password",id:"current_password",placeholder:s({id:"settings.security.form.currentPassword.placeholder"})})}),e.jsx("div",{className:n.fields,children:e.jsx(o.Item,{label:s({id:"settings.security.form.newPassword.label"}),name:"newPassword",rules:[{required:!0,message:s({id:"settings.security.form.newPassword.required"})},{min:8,pattern:new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$"),message:s({id:"settings.security.form.newPassword.message"})}],children:e.jsx(u,{type:"password",id:"new_password",placeholder:s({id:"settings.security.form.newPassword.placeholder"})})})}),e.jsx("div",{className:n.fields,children:e.jsx(o.Item,{label:s({id:"settings.security.form.confirmNewPassword.label"}),name:"confirmPassword",rules:[{required:!0,message:s({id:"settings.security.form.confirmNewPassword.required"})},({getFieldValue:a})=>({validator(i,m){return!m||a("newPassword")===m?Promise.resolve():Promise.reject(new Error(s({id:"settings.security.form.confirmNewPassword.message"})))}})],children:e.jsx(u,{type:"password",placeholder:s({id:"settings.security.form.confirmNewPassword.placeholder"}),id:"confirm_new_password"})})}),e.jsx(o.Item,{children:e.jsx("div",{className:n.buttonGroup,children:e.jsx(v,{type:"primary",htmlType:"submit",id:"save",className:n.submitButton,loading:l,children:s({id:"generic.save"})})})})]})})})})};export{W as default};
